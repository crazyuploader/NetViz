{% extends "base.html" %}

{% block title %}Search - NetViz{% endblock %}

{% block content %}
<hgroup>
  <h1>Search</h1>
  <p>Find networks by name or ASN</p>
</hgroup>

<article>
  <form action="/search" method="get">
    <div class="grid">
      <label>
        AS Number
        <input type="number" name="asn" placeholder="e.g. 6453" value="{{ query_asn | default(value='') }}">
      </label>
      <label>
        Network Name
        <input type="text" name="name" placeholder="e.g. Google" value="{{ query_name | default(value='') }}">
      </label>
      <label>
        &nbsp;
        <button type="submit">Search</button>
      </label>
    </div>
  </form>
</article>

{% if results | length > 0 %}
<article>
  <header>Results ({{ results | length }})</header>
  <div class="overflow-auto">
    <table class="striped">
      <thead>
        <tr>
          <th>Name</th>
          <th>ASN</th>
          <th>Type</th>
          <th>Prefixes (v4/v6)</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        {% for network in results %}
        <tr>
          <td>
            <strong>{{ network.name }}</strong>
            {% if network.aka %}<br><small>{{ network.aka }}</small>{% endif %}
          </td>
          <td><mark>AS{{ network.asn }}</mark></td>
          <td>{{ network.info_type or 'Unknown' }}</td>
          <td>{{ network.info_prefixes4 or 0 }} / {{ network.info_prefixes6 or 0 }}</td>
          <td>
              {% if network.status == 'ok' %}OK{% else %}{{ network.status }}{% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</article>
{% elif query_asn or query_name %}
<article>
  <p>No results found for your query.</p>
</article>
{% endif %}

{% endblock %}
